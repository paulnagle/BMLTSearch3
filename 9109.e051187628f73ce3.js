"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9109,6394,4898],{6394:(T,g,o)=>{o.d(g,{D:()=>t});var c=o(6814),v=o(3704),i=o(451),u=o(6223),L=o(9212);let t=(()=>{var d;class A{}return(d=A).\u0275fac=function(l){return new(l||d)},d.\u0275mod=L.oAB({type:d}),d.\u0275inj=L.cJS({imports:[c.ez,i.Pc,v.aw,u.u5]}),A})()},9109:(T,g,o)=>{o.r(g),o.d(g,{LocationSearchPageModule:()=>U});var c=o(6814),v=o(6223),i=o(451),u=o(6800),L=o(7838),t=o(9212),d=o(6687),A=o(2548),m=o(9140),l=o(3704),M=o(6786),Z=o(2368);function E(e,a){1&e&&t._UZ(0,"div")}function C(e,a){1&e&&(t.TgZ(0,"div",13)(1,"ion-item",14)(2,"b"),t._uU(3),t.ALo(4,"translate"),t.qZA()()()),2&e&&(t.Q6J("ngClass","one"),t.xp6(3),t.Oqu(t.lcZ(4,2,"NO_LOCATION")))}function x(e,a){if(1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-meeting-list",16),t.qZA()),2&e){const r=t.oxw(2);t.xp6(),t.Q6J("data",r.addressMeetingList)}}function _(e,a){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,x,2,1,"div",15),t.qZA()),2&e){const r=t.oxw();t.xp6(),t.Q6J("ngIf",r.isLoaded)}}const O=[{path:"",component:(()=>{var e;class a{constructor(s,n,p,f,y){this.MeetingListService=s,this.loaderCtrl=n,this.storage=p,this.translate=f,this.GeocodeService=y,this.shownGroup=null,this.isLoaded=!1,this.currentAddress="",this.addressLatitude=0,this.addressLongitude=0,this.radiusMeters=1e4,this.meetingsListGrouping="weekday_tinyint",this.storage.get("searchRange").then(h=>{this.radius=h||25}),this.storage.get("savedAddressLat").then(h=>{h?(this.addressLatitude=h,this.storage.get("savedAddressLng").then(S=>{S?(this.addressLongitude=S,this.storage.get("savedAddress").then(P=>{P?(this.currentAddress=P,this.getAllMeetingsAfterLocate()):this.locatePhone()})):this.locatePhone()})):this.locatePhone()})}getAllMeetingsAfterLocate(){this.MeetingListService.getAddressMeetings(this.addressLatitude,this.addressLongitude,this.radius).then(s=>{this.addressMeetingList=s.data,this.isLoaded=!0,this.dismissLoader()})}presentLoader(s){this.loader||(this.loader=this.loaderCtrl.present(s))}dismissLoader(){this.loader&&(this.loader=this.loaderCtrl.dismiss(),this.loader=null)}locatePhone(){this.translate.get("LOCATING").subscribe(s=>{this.presentLoader(s)}),L.b.getCurrentPosition().then(s=>{this.addressLatitude=s.coords.latitude,this.addressLongitude=s.coords.longitude,this.storage.set("savedAddressLat",this.addressLatitude),this.storage.set("savedAddressLng",this.addressLongitude),this.GeocodeService.convertLatLong(this.addressLatitude,this.addressLongitude).subscribe(n=>{this.currentAddress=n,this.currentAddress.results[0]?(this.currentAddress=this.currentAddress.results[0].formatted_address,this.storage.set("savedAddress",this.currentAddress),this.dismissLoader(),this.getAllMeetingsAfterLocate()):(this.dismissLoader(),this.currentAddress="Location not found")})}).catch(s=>{console.log("Error getting location",s),this.currentAddress="Location not found",this.dismissLoader()})}getAllMeetings(s){this.radius=s.detail.value,this.presentLoader(""),this.MeetingListService.getAddressMeetings(this.addressLatitude,this.addressLongitude,this.radius).then(n=>{this.addressMeetingList=n.data,this.isLoaded=!0,this.dismissLoader()})}}return(e=a).\u0275fac=function(s){return new(s||e)(t.Y36(d.q),t.Y36(A.b),t.Y36(m.V),t.Y36(l.sK),t.Y36(M.M))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-location-search"]],decls:35,vars:21,consts:[["color","primary"],["slot","start"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"ngClass",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"no-padding"],["shape","round","expand","block","color","primary","id","LocationButton",3,"click"],["slot","end","name","locate-outline"],[1,"text-wrap"],["id","RadiusRange","min","5","max","50","pin","true","debounce","500",3,"value","ionKnobMoveEnd"],["color","primary","slot","start"],["color","primary","slot","end"],[3,"ngClass"],["text-wrap",""],[4,"ngIf"],["meetingType","regular","expandAll","false",3,"data"]],template:function(s,n){1&s&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-menu-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5),t.ALo(6,"translate"),t.qZA()()(),t.TgZ(7,"ion-content")(8,"div",2),t.YNc(9,E,1,0,"div",3)(10,C,5,4,"div",4)(11,_,2,1,"div",5),t.qZA()(),t.TgZ(12,"ion-footer",6)(13,"ion-toolbar",6)(14,"ion-grid")(15,"ion-row")(16,"ion-col")(17,"ion-button",7),t.NdJ("click",function(){return n.locatePhone()}),t._UZ(18,"ion-icon",8),t._uU(19),t.ALo(20,"translate"),t.qZA()()(),t.TgZ(21,"ion-row")(22,"ion-col")(23,"ion-item",9),t._uU(24),t.ALo(25,"translate"),t.TgZ(26,"b"),t._uU(27),t.qZA()()()()(),t.TgZ(28,"ion-range",10),t.NdJ("ionKnobMoveEnd",function(f){return n.getAllMeetings(f)}),t.TgZ(29,"ion-label",11),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"ion-label",12),t._uU(33),t.ALo(34,"translate"),t.qZA()()()()),2&s&&(t.xp6(5),t.hij(" ",t.lcZ(6,11,"LOCATIONSEARCH")," "),t.xp6(3),t.s9C("ngSwitch",n.currentAddress),t.xp6(),t.Q6J("ngSwitchCase",""),t.xp6(),t.Q6J("ngSwitchCase","Location not found"),t.xp6(9),t.hij("",t.lcZ(20,13,"SEARCH")," "),t.xp6(5),t.AsE(" ",n.radius," ",t.lcZ(25,15,"MEETINGS_NEAREST")," "),t.xp6(3),t.hij('\xa0"',n.currentAddress,'"'),t.xp6(),t.Q6J("value",n.radius),t.xp6(2),t.hij("5 ",t.lcZ(31,17,"MEETINGS"),""),t.xp6(3),t.hij("50 ",t.lcZ(34,19,"MEETINGS"),""))},dependencies:[c.mk,c.O5,c.RF,c.n9,c.ED,i.YG,i.Sm,i.wI,i.W2,i.fr,i.jY,i.Gu,i.gu,i.Ie,i.Q$,i.fG,i.I_,i.Nd,i.wd,i.sr,i.j9,Z.D,l.X$]}),a})()}];let I=(()=>{var e;class a{}return(e=a).\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.Bz.forChild(O),u.Bz]}),a})();var R=o(6394);let U=(()=>{var e;class a{}return(e=a).\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[d.q,Geolocation,M.M,m.V],imports:[c.ez,v.u5,i.Pc,l.aw,I,R.D]}),a})()}}]);