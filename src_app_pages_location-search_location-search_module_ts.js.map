{"version":3,"file":"src_app_pages_location-search_location-search_module_ts.js","mappings":"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","sources":["./src/app/pages/location-search/location-search-routing.module.ts","./src/app/pages/location-search/location-search.module.ts","./src/app/pages/location-search/location-search.page.ts","./src/app/providers/geolocate.service.ts","./src/app/pages/location-search/location-search.page.scss"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LocationSearchPage } from './location-search.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LocationSearchPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LocationSearchPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { LocationSearchPageRoutingModule } from './location-search-routing.module';\nimport { LocationSearchPage } from './location-search.page';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { MeetingListProvider } from 'src/app/providers/meeting-list.service';\nimport { InAppBrowser } from '@awesome-cordova-plugins/in-app-browser/ngx';\nimport { GeolocateProvider } from 'src/app/providers/geolocate.service';\nimport { Geolocation } from '@awesome-cordova-plugins/geolocation/ngx';\nimport { PipesModule } from 'src/app/pipes/pipes.module';\nimport { ComponentModule } from '../../components/component/component.module';\nimport { HTTP } from '@awesome-cordova-plugins/http/ngx';\nimport { StorageService } from 'src/app/providers/storage.service';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TranslateModule,\n    PipesModule,\n    LocationSearchPageRoutingModule,\n    ComponentModule\n  ],\n  declarations: [\n    LocationSearchPage\n  ],\n  providers: [\n    InAppBrowser,\n    MeetingListProvider,\n    GeolocateProvider,\n    Geolocation,\n    HTTP,\n    StorageService\n  ]\n})\nexport class LocationSearchPageModule {}\n","import { Component } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { StorageService } from '../../providers/storage.service';\nimport { MeetingListProvider } from '../../providers/meeting-list.service';\nimport { GeolocateProvider } from '../../providers/geolocate.service';\nimport { InAppBrowser } from '@awesome-cordova-plugins/in-app-browser/ngx';\nimport { Geolocation } from '@awesome-cordova-plugins/geolocation/ngx';\nimport { LoadingService } from '../../providers/loading.service';\n\n@Component({\n  selector: 'app-location-search',\n  templateUrl: './location-search.page.html',\n  styleUrls: ['./location-search.page.scss'],\n})\nexport class LocationSearchPage  {\n\n  addressMeetingList: any;\n  meetingsListGrouping: string;\n\n  shownGroup = null;\n  loader = null;\n  isLoaded = false;\n  currentAddress: any = '';\n  addressLatitude: any = 0;\n  addressLongitude: any = 0;\n  radius: number;\n  radiusMeters = 10000;\n\n  constructor(private MeetingListProvider: MeetingListProvider,\n              private loaderCtrl: LoadingService,\n              private storage: StorageService,\n              private translate: TranslateService,\n              private GeolocateProvider: GeolocateProvider,\n              private geolocation: Geolocation) {\n    this.meetingsListGrouping = 'weekday_tinyint';\n\n    // this.storage.ready().then(() => {\n\n      this.storage.get('searchRange')\n        .then(searchValue => {\n          if (searchValue) {\n            this.radius = searchValue;\n          } else {\n            this.radius = 25;\n          }\n        });\n\n      this.storage.get('savedAddressLat').then(value => {\n        if (value) {\n          this.addressLatitude = value;\n          this.storage.get('savedAddressLng').then(value => {\n            if (value) {\n              this.addressLongitude = value;\n              this.storage.get('savedAddress').then(value => {\n                if (value) {\n                  this.currentAddress = value;\n                  this.getAllMeetings();\n                } else {\n                  this.locatePhone();\n                }\n              });\n            } else {\n              this.locatePhone();\n            }\n          });\n        } else {\n          this.locatePhone();\n        }\n      });\n    // });\n\n  }\n\n  getAllMeetings() {\n    this.translate.get('FINDING_MTGS').subscribe(value => { this.presentLoader(value); });\n    this.MeetingListProvider.getAddressMeetings(this.addressLatitude, this.addressLongitude, this.radius).subscribe((data) => {\n      this.addressMeetingList = data;\n      this.isLoaded = true;\n      this.dismissLoader();\n    });\n  }\n\n  presentLoader(loaderText: any) {\n    if (!this.loader) {\n      this.loader = this.loaderCtrl.present(loaderText);\n    }\n  }\n\n  dismissLoader() {\n    if (this.loader) {\n      this.loader = this.loaderCtrl.dismiss();\n      this.loader = null;\n    }\n  }\n\n  locatePhone() {\n    this.translate.get('LOCATING').subscribe(value => { this.presentLoader(value); });\n    this.geolocation.getCurrentPosition().then((resp) => {\n      this.addressLatitude = resp.coords.latitude;\n      this.addressLongitude = resp.coords.longitude;\n\n      this.storage.set('savedAddressLat', this.addressLatitude);\n      this.storage.set('savedAddressLng', this.addressLongitude);\n\n      this.GeolocateProvider.convertLatLong(this.addressLatitude, this.addressLongitude).subscribe((json) => {\n        this.currentAddress = json;\n        if (this.currentAddress.results[0]) {\n          this.currentAddress = this.currentAddress.results[0].formatted_address;\n          this.storage.set('savedAddress', this.currentAddress);\n\n          this.dismissLoader();\n          this.getAllMeetings();\n        } else {\n          this.dismissLoader();\n          this.currentAddress = 'Location not found';\n        }\n      });\n\n    }).catch((error) => {\n      console.log('Error getting location', error);\n\n      this.currentAddress = 'Location not found';\n      this.dismissLoader();\n    });\n  }\n\n\n\n}\n\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\n/*\n  Generated class for the GeolocateProvider provider.\n\n  See https://angular.io/guide/dependency-injection for more info on providers\n  and Angular DI.\n*/\n@Injectable()\nexport class GeolocateProvider {\n\n  googleAPIKey = '&key=AIzaSyDg5AKBNjMvoBBlLgXpy-dLxLAcVJYpOq8';\n  convertLatLongUrl = 'https://maps.googleapis.com/maps/api/geocode/json?latlng=';\n  convertAddressUrl = 'https://maps.googleapis.com/maps/api/geocode/json?address=';\n\n  constructor(public http: HttpClient) {\n  }\n\n  convertLatLong(lat, long) {\n    const url = this.convertLatLongUrl + lat + ',' + long + this.googleAPIKey;\n\n    return this.http.get(url);\n  }\n\n  convertAddress(address) {\n    const url = this.convertAddressUrl + address + this.googleAPIKey;\n\n    return this.http.get(url);\n  }\n}\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n"],"names":["NgModule","RouterModule","LocationSearchPage","routes","path","component","LocationSearchPageRoutingModule","__decorate","imports","forChild","exports","CommonModule","FormsModule","IonicModule","TranslateModule","MeetingListProvider","InAppBrowser","GeolocateProvider","Geolocation","PipesModule","ComponentModule","HTTP","StorageService","LocationSearchPageModule","declarations","providers","Component","TranslateService","LoadingService","_class","constructor","loaderCtrl","storage","translate","geolocation","shownGroup","loader","isLoaded","currentAddress","addressLatitude","addressLongitude","radiusMeters","meetingsListGrouping","get","then","searchValue","radius","value","getAllMeetings","locatePhone","subscribe","presentLoader","getAddressMeetings","data","addressMeetingList","dismissLoader","loaderText","present","dismiss","getCurrentPosition","resp","coords","latitude","longitude","set","convertLatLong","json","results","formatted_address","catch","error","console","log","selector","template","__NG_CLI_RESOURCE__0","HttpClient","Injectable","http","googleAPIKey","convertLatLongUrl","convertAddressUrl","lat","long","url","convertAddress","address"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}