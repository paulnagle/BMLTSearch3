"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9109,6394,4898],{6394:(T,g,i)=>{i.d(g,{D:()=>t});var c=i(6814),v=i(3704),o=i(451),u=i(6223),L=i(9212);let t=(()=>{var d;class A{}return(d=A).\u0275fac=function(l){return new(l||d)},d.\u0275mod=L.oAB({type:d}),d.\u0275inj=L.cJS({imports:[c.ez,o.Pc,v.aw,u.u5]}),A})()},9109:(T,g,i)=>{i.r(g),i.d(g,{LocationSearchPageModule:()=>R});var c=i(6814),v=i(6223),o=i(451),u=i(6800),L=i(7838),t=i(9212),d=i(6687),A=i(2548),m=i(9140),l=i(3704),M=i(6786),Z=i(2368);function C(e,n){1&e&&t._UZ(0,"div")}function E(e,n){1&e&&(t.TgZ(0,"div",12)(1,"ion-item",7)(2,"b"),t._uU(3),t.ALo(4,"translate"),t.qZA()()()),2&e&&(t.Q6J("ngClass","one"),t.xp6(3),t.Oqu(t.lcZ(4,2,"NO_LOCATION")))}function x(e,n){if(1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-meeting-list",14),t.qZA()),2&e){const r=t.oxw(2);t.xp6(),t.Q6J("data",r.addressMeetingList)}}function O(e,n){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,x,2,1,"div",13),t.qZA()),2&e){const r=t.oxw();t.xp6(),t.Q6J("ngIf",r.isLoaded)}}const _=[{path:"",component:(()=>{var e;class n{constructor(s,a,f,p,U){this.MeetingListService=s,this.loaderCtrl=a,this.storage=f,this.translate=p,this.GeocodeService=U,this.shownGroup=null,this.isLoaded=!1,this.currentAddress="",this.addressLatitude=0,this.addressLongitude=0,this.radiusMeters=1e4,this.meetingsListGrouping="weekday_tinyint",this.storage.get("searchRange").then(h=>{this.radius=h||25}),this.storage.get("savedAddressLat").then(h=>{h?(this.addressLatitude=h,this.storage.get("savedAddressLng").then(S=>{S?(this.addressLongitude=S,this.storage.get("savedAddress").then(P=>{P?(this.currentAddress=P,this.getAllMeetingsAfterLocate()):this.locatePhone()})):this.locatePhone()})):this.locatePhone()})}getAllMeetingsAfterLocate(){console.log("Calling getAllMeetingsAfterLocate"),this.MeetingListService.getAddressMeetings(this.addressLatitude,this.addressLongitude,this.radius).then(s=>{this.addressMeetingList=s.data,this.isLoaded=!0,this.dismissLoader()})}presentLoader(s){this.loader||(this.loader=this.loaderCtrl.present(s))}dismissLoader(){this.loader&&(this.loader=this.loaderCtrl.dismiss(),this.loader=null)}locatePhone(){this.translate.get("LOCATING").subscribe(s=>{this.presentLoader(s)}),L.b.getCurrentPosition().then(s=>{this.addressLatitude=s.coords.latitude,this.addressLongitude=s.coords.longitude,this.storage.set("savedAddressLat",this.addressLatitude),this.storage.set("savedAddressLng",this.addressLongitude),this.GeocodeService.convertLatLong(this.addressLatitude,this.addressLongitude).subscribe(a=>{this.currentAddress=a,this.currentAddress.results[0]?(this.currentAddress=this.currentAddress.results[0].formatted_address,this.storage.set("savedAddress",this.currentAddress),this.dismissLoader(),this.getAllMeetingsAfterLocate()):(this.dismissLoader(),this.currentAddress="Location not found")})}).catch(s=>{console.log("Error getting location",s),this.currentAddress="Location not found",this.dismissLoader()})}getAllMeetings(s){this.radius=s.detail.value,this.presentLoader(""),this.MeetingListService.getAddressMeetings(this.addressLatitude,this.addressLongitude,this.radius).then(a=>{this.addressMeetingList=a.data,this.isLoaded=!0,this.dismissLoader()})}}return(e=n).\u0275fac=function(s){return new(s||e)(t.Y36(d.q),t.Y36(A.b),t.Y36(m.V),t.Y36(l.sK),t.Y36(M.M))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-location-search"]],decls:30,vars:20,consts:[["color","primary"],["slot","start"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"ngClass",4,"ngSwitchCase"],[4,"ngSwitchDefault"],["no-padding",""],["text-wrap",""],["expand","full","color","primary","id","LocationButton",1,"col","text-center","text-wrap",3,"click"],["name","locate-outline"],["id","RadiusRange","min","5","max","50","color","danger","pin","true","debounce","500",3,"ionKnobMoveEnd"],["slot","end"],[3,"ngClass"],[4,"ngIf"],["meetingType","regular","expandAll","false",3,"data"]],template:function(s,a){1&s&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-menu-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5),t.ALo(6,"translate"),t.qZA()()(),t.TgZ(7,"ion-content")(8,"div",2),t.YNc(9,C,1,0,"div",3)(10,E,5,4,"div",4)(11,O,2,1,"div",5),t.qZA()(),t.TgZ(12,"ion-footer",6)(13,"ion-toolbar",6)(14,"ion-item",7)(15,"b"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"ion-item",7)(19,"ion-button",8),t.NdJ("click",function(){return a.locatePhone()}),t._UZ(20,"ion-icon",9),t._uU(21),t.ALo(22,"translate"),t.qZA()(),t.TgZ(23,"ion-range",10),t.NdJ("ionKnobMoveEnd",function(p){return a.getAllMeetings(p)}),t.TgZ(24,"ion-label",1),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"ion-label",11),t._uU(28),t.ALo(29,"translate"),t.qZA()()()()),2&s&&(t.xp6(5),t.hij(" ",t.lcZ(6,10,"LOCATIONSEARCH")," "),t.xp6(3),t.s9C("ngSwitch",a.currentAddress),t.xp6(),t.Q6J("ngSwitchCase",""),t.xp6(),t.Q6J("ngSwitchCase","Location not found"),t.xp6(6),t.lnq("",a.radius," ",t.lcZ(17,12,"MEETINGS_NEAREST")," ",a.currentAddress,""),t.xp6(5),t.hij("\xa0",t.lcZ(22,14,"LOCATIONSEARCH")," "),t.xp6(4),t.hij("5 ",t.lcZ(26,16,"MEETINGS"),""),t.xp6(3),t.hij("50 ",t.lcZ(29,18,"MEETINGS"),""))},dependencies:[c.mk,c.O5,c.RF,c.n9,c.ED,o.YG,o.Sm,o.W2,o.fr,o.Gu,o.gu,o.Ie,o.Q$,o.fG,o.I_,o.wd,o.sr,o.j9,Z.D,l.X$]}),n})()}];let I=(()=>{var e;class n{}return(e=n).\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.Bz.forChild(_),u.Bz]}),n})();var D=i(6394);let R=(()=>{var e;class n{}return(e=n).\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[d.q,Geolocation,M.M,m.V],imports:[c.ez,v.u5,o.Pc,l.aw,I,D.D]}),n})()}}]);